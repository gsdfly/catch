webpackJsonp([3],{"/JBR":function(t,e,a){t.exports=a.p+"static/img/stamp_success.3dbca70.png"},"3oWA":function(t,e){},YaYI:function(t,e,a){t.exports=a.p+"static/img/history_none.349d231.png"},kDcO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("gyMJ"),n=a("Cz8s"),i=a("KgXo"),o={name:"gamehistory",data:function(){return{htmlShow:!1,dataList:{},current_page:1,hasNext:!0,size:20,loading:!0}},components:{headerTitle:n.a,loading:i.a},mounted:function(){var t=this;Object(s.f)({page:1,size:this.size}).then(function(e){try{t.dataList=e.response.list,t.current_page=e.response.pagination.current_page,e.response.pagination.current_page===e.response.pagination.total_pages&&(t.hasNext=!1)}catch(t){}t.htmlShow=!0})},methods:{goDollRoom:function(){this.$router.push("index/home")},addEventScroll:function(t){t.target.scrollTop+3*t.target.clientHeight/2>=document.querySelector(".main").offsetHeight&&this.loading&&this.getGameHistory()},getGameHistory:function(){var t=this;this.loading=!1,console.log(this.hasNext),this.hasNext&&Object(s.f)({page:this.current_page+1,size:this.size}).then(function(e){t.loading=!0;try{e.response.list.forEach(function(t){this.dataList.push(t)}.bind(t)),t.current_page=e.response.pagination.current_page,e.response.pagination.current_page===e.response.pagination.total_pages&&(t.hasNext=!1)}catch(t){}}).catch(function(){t.loading=!0})}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gamehistory",on:{scroll:function(e){t.addEventScroll(e)}}},[s("header-title",{attrs:{title:"游戏记录"}}),t._v(" "),t.dataList.length>0?s("ul",{staticClass:"main"},t._l(t.dataList,function(e){return s("li",[s("div",{staticClass:"doll"},[s("img",{attrs:{src:e.image,alt:""}})]),t._v(" "),s("div",{staticClass:"dollInfo"},[s("h3",[t._v(t._s(e.doll_name))]),t._v(" "),s("p",[t._v(t._s(e.start_time))])]),t._v(" "),s("div",{staticClass:"caught"},[e.prize?s("img",{attrs:{src:a("/JBR"),alt:""}}):s("span",[t._v("抓取失败")])])])})):s("div",{staticClass:"nothing"},[s("img",{attrs:{src:a("YaYI"),alt:""}}),t._v(" "),s("p",[t._v("您还没有进行过一场游戏")]),t._v(" "),s("button",{on:{click:t.goDollRoom}},[t._v("去游戏")])]),t._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:!t.htmlShow,expression:"!htmlShow"}]})],1)},staticRenderFns:[]};var c=a("8AGX")(o,r,!1,function(t){a("3oWA")},"data-v-a1ef2092",null);e.default=c.exports}});
//# sourceMappingURL=3.32b7cec77d4ff2695b3d.js.map