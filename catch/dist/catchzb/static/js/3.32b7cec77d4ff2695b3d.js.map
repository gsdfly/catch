{"version":3,"sources":["webpack:///./src/assets/stamp_success.png","webpack:///./src/assets/history_none.png","webpack:///src/components/gamehistory.vue","webpack:///./src/components/gamehistory.vue?d99b","webpack:///./src/components/gamehistory.vue"],"names":["module","exports","__webpack_require__","p","gamehistory","headerTitle","header","loading","_this","this","list","current_page","getGameHistory","_this2","hasNext","value","bind","components_gamehistory","render","_vm","_h","$createElement","_c","_self","staticClass","on","scroll","$event","addEventScroll","attrs","title","_v","dataList","length","_l","item","src","image","alt","_s","doll_name","start_time","click","goDollRoom","directives","name","rawName","htmlShow","expression","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"yCAAAA,EAAAC,QAAAC,EAAAC,EAAA,oFCAAH,EAAAC,QAAAC,EAAAC,EAAA,kKC8BAC,QAEA,+CAGA,2BAEA,WACA,OACA,YAEA,gBAGAC,YAAAC,EAAA,EAEAC,UAAA,sBACA,IAAAC,EAAAC,qFAGAC,0CACAC,iGAEA,yBAGA,sDAKA,yJAKAC,4CAIA,IAAAC,EAAAJ,mBACA,mBACAK,0GAGA,6DAGAC,IACAC,KAAAH,yCACAF,iGAEA,4CAIA,OCnFAM,GADiBC,OAFjB,WAA0B,IAAAC,EAAAV,KAAaW,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,cAAAC,IAA8BC,OAAA,SAAAC,GAA0BR,EAAAS,eAAAD,OAA6BL,EAAA,gBAAqBO,OAAOC,MAAA,UAAgBX,EAAAY,GAAA,KAAAZ,EAAAa,SAAAC,OAAA,EAAAX,EAAA,MAAiDE,YAAA,QAAmBL,EAAAe,GAAAf,EAAA,kBAAAgB,GAAsC,OAAAb,EAAA,MAAAA,EAAA,OAA0BE,YAAA,SAAmBF,EAAA,OAAYO,OAAOO,IAAAD,EAAAE,MAAAC,IAAA,QAA2BnB,EAAAY,GAAA,KAAAT,EAAA,OAA0BE,YAAA,aAAuBF,EAAA,MAAAH,EAAAY,GAAAZ,EAAAoB,GAAAJ,EAAAK,cAAArB,EAAAY,GAAA,KAAAT,EAAA,KAAAH,EAAAY,GAAAZ,EAAAoB,GAAAJ,EAAAM,iBAAAtB,EAAAY,GAAA,KAAAT,EAAA,OAA0HE,YAAA,WAAqBW,EAAA,MAAAb,EAAA,OAAyBO,OAAOO,IAAAlC,EAAA,QAAAoC,IAAA,MAAyDhB,EAAA,QAAAH,EAAAY,GAAA,iBAAkCT,EAAA,OAAaE,YAAA,YAAsBF,EAAA,OAAYO,OAAOO,IAAAlC,EAAA,QAAAoC,IAAA,MAAwDnB,EAAAY,GAAA,KAAAT,EAAA,KAAAH,EAAAY,GAAA,iBAAAZ,EAAAY,GAAA,KAAAT,EAAA,UAAuEG,IAAIiB,MAAAvB,EAAAwB,cAAwBxB,EAAAY,GAAA,WAAAZ,EAAAY,GAAA,KAAAT,EAAA,WAA8CsB,aAAaC,KAAA,OAAAC,QAAA,SAAA/B,OAAAI,EAAA4B,SAAAC,WAAA,iBAA4E,IAEljCC,oBCCjB,IAcAC,EAdAhD,EAAA,OAcAiD,CACA/C,EACAa,GATA,EAVA,SAAAmC,GACAlD,EAAA,SAaA,kBAEA,MAUAmD,EAAA,QAAAH,EAAA","file":"static/js/3.32b7cec77d4ff2695b3d.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/stamp_success.3dbca70.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/stamp_success.png\n// module id = /JBR\n// module chunks = 3","module.exports = __webpack_public_path__ + \"static/img/history_none.349d231.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/history_none.png\n// module id = YaYI\n// module chunks = 3","<template>\n  <!--<div class=\"gamehistory\" v-if=\"htmlShow\" @scroll=\"addEventScroll($event)\">-->\n    <div class=\"gamehistory\" @scroll=\"addEventScroll($event)\">\n    <header-title :title=\"'游戏记录'\"></header-title>\n    <ul v-if=\"dataList.length > 0\" class=\"main\">\n      <li v-for=\"item in dataList\">\n          <div class=\"doll\"><img :src=\"item.image\" alt=\"\"></div>\n            <div class=\"dollInfo\">\n              <h3>{{item.doll_name}}</h3>\n              <p>{{item.start_time}}</p>\n            </div>\n            <div class=\"caught\">\n              <img v-if=\"item.prize\" src=\"./../assets/stamp_success.png\" alt=\"\">\n              <span v-else>抓取失败</span>\n            </div>\n      </li>\n    </ul>\n    <div class=\"nothing\" v-else>\n      <img src=\"./../assets/history_none.png\" alt=\"\">\n      <p>您还没有进行过一场游戏</p>\n      <button @click=\"goDollRoom\">去游戏</button>\n    </div>\n    <loading v-show=\"!htmlShow\"></loading>\n  </div>\n</template>\n\n<script>\n  import {gameHistory} from './../api/index'\n  import headerTitle from './header.vue'\n  import loading from './loading.vue'\n\n  export default {\n    name:'gamehistory',\n    data(){\n      return {\n        htmlShow:false,\n        dataList:{},\n        current_page:1,\n        hasNext:true,\n        size:20,\n        loading:true,\n      }\n    },\n    components:{\n      headerTitle,\n      loading\n    },\n    mounted(){\n      gameHistory({page:1,size:this.size}).then((res)=>{\n        try {\n          this.dataList = res.response.list;\n          this.current_page = res.response.pagination.current_page;\n          if(res.response.pagination.current_page === res.response.pagination.total_pages){\n            this.hasNext = false;\n          }\n        }catch(err) {}\n        this.htmlShow = true;\n      })\n    },\n    methods:{\n      goDollRoom(){\n        this.$router.push('index/home')\n      },\n      addEventScroll(event){\n        if((event.target.scrollTop + event.target.clientHeight*3/2)>= document.querySelector('.main').offsetHeight){\n          if(this.loading){\n            this.getGameHistory();\n          }\n        }\n      },\n      getGameHistory(){\n        this.loading = false;\n        console.log(this.hasNext);\n        if(this.hasNext){\n          gameHistory({page:(this.current_page+1),size:this.size}).then((res)=>{\n            this.loading = true;\n           try {\n             res.response.list.forEach(function (value) {\n               this.dataList.push(value);\n             }.bind(this))\n             this.current_page = res.response.pagination.current_page;\n             if(res.response.pagination.current_page === res.response.pagination.total_pages){\n               this.hasNext = false;\n             }\n           }catch(err) {}\n          }).catch(()=>{\n            this.loading = true;\n          })\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .gamehistory{\n    width: 100%;\n    height: 100%;\n    background: #fff2f2;\n    overflow: auto;\n    font-size: 0.48rem;\n  }\n  .gamehistory ul{\n    width: 100%;\n    /*height: 100%;*/\n    padding:0.36rem 0.36rem 0.3rem 0.36rem;\n    /*overflow: auto;*/\n    margin: 1.26rem 0 0 0;\n  }\n  .gamehistory ul li{\n    width: 100%;\n    height: 2.46rem;\n    padding: 0.18rem 0.28rem;\n    background: #fff;\n    margin: 0 0 0.06rem 0;\n    border-radius: 0.18rem;\n  }\n  .gamehistory ul li .doll{\n    width: 2.1rem;\n    height: 100%;\n    float: left;\n  }\n  .gamehistory ul li .doll img{\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 0.18rem;\n  }\n  .gamehistory ul li .dollInfo{\n    /*width: 100;*/\n    float: left;\n    margin: 0 0 0 0.54rem;\n       }\n  .gamehistory ul li .dollInfo h3{\n    line-height: 1.3rem;\n  }\n  .gamehistory ul li .dollInfo p{\n    font-size: 0.36rem;\n    color: #999999;\n  }\n\n  .gamehistory ul li .caught{\n    float: right;\n    font-size: 0.36rem;\n    color: #999999;\n    line-height: 2.1rem;\n  }\n  .gamehistory ul li .caught img{\n    margin: 0.2rem 0 0 0;\n    width: 1.82rem;\n    height: 1.69rem;\n    display: block;\n  }\n  .nothing{\n    width: 100%;\n    height: 100%;\n    position: relative;\n    top:0;\n    left: 0;\n    padding: 0.1px;\n  }\n  .nothing>img{\n    width: 2.84rem;\n    display: block;\n    margin: 30% auto 0 auto;\n  }\n  .nothing>p{\n    font-size: 0.52rem;\n    color: #999;\n    text-align: center;\n    margin: 2rem 0 0 0;\n  }\n  .nothing>button{\n    width: 7.14rem;\n    height: 1.38rem;\n    font-size: 0.52rem;\n    color: #fff;\n    border-radius: 0.18rem;\n    background: #f972c7;\n    border: none;\n    outline: none;\n    position: absolute;\n    bottom:25%;\n    left: 50%;\n    transform: translateX(-50%);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/gamehistory.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"gamehistory\",on:{\"scroll\":function($event){_vm.addEventScroll($event)}}},[_c('header-title',{attrs:{\"title\":'游戏记录'}}),_vm._v(\" \"),(_vm.dataList.length > 0)?_c('ul',{staticClass:\"main\"},_vm._l((_vm.dataList),function(item){return _c('li',[_c('div',{staticClass:\"doll\"},[_c('img',{attrs:{\"src\":item.image,\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"dollInfo\"},[_c('h3',[_vm._v(_vm._s(item.doll_name))]),_vm._v(\" \"),_c('p',[_vm._v(_vm._s(item.start_time))])]),_vm._v(\" \"),_c('div',{staticClass:\"caught\"},[(item.prize)?_c('img',{attrs:{\"src\":require(\"./../assets/stamp_success.png\"),\"alt\":\"\"}}):_c('span',[_vm._v(\"抓取失败\")])])])})):_c('div',{staticClass:\"nothing\"},[_c('img',{attrs:{\"src\":require(\"./../assets/history_none.png\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('p',[_vm._v(\"您还没有进行过一场游戏\")]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.goDollRoom}},[_vm._v(\"去游戏\")])]),_vm._v(\" \"),_c('loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.htmlShow),expression:\"!htmlShow\"}]})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.6.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-a1ef2092\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.6.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/gamehistory.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a1ef2092\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=styles&index=0!./gamehistory.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=script&index=0!./gamehistory.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=script&index=0!./gamehistory.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a1ef2092\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.6.2@vue-loader/lib/selector?type=template&index=0!./gamehistory.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-a1ef2092\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/gamehistory.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}